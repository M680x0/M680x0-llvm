# RUN: llc %s -mtriple=m680x0 -start-after=prologepilog -O0 -filetype=obj -o - \
# RUN:  | extract-section .text                                                \
# RUN:  | FileCheck %s -check-prefixes=CMP8ki,CMP32ki,CMP8qi,CMP32qi,CMP8fi,\
# RUN:CMP32fi,CMP8pi,CMP32pi,CMP8ji,CMP32ji

#------------------------------------------------------------------------------
# MxCMP_MI class used for compare operations and operates on memory data and
# immediate data. It uses MxArithImmEncoding encoding class.
# NOTE: CMP is calculated by subtracting LHS(Imm) from RHS(Mem)
#------------------------------------------------------------------------------


--- # PCI
#               -------------------------------+-------+-----------+-----------
#                F   E   D   C   B   A   9   8 | 7   6 | 5   4   3 | 2   1   0
#               -------------------------------+-------+-----------+-----------
#       OPWORD   0   0   0   0   1   1   0   0 |  SIZE |    MODE   |    REG
#               -------------------------------+-------+-----------+-----------
# CMP8ki:        0   0   0   0   1   1   0   0 . 0   0   1   1   1   0   1   1
# CMP8ki-SAME:   0   0   0   0   0   0   0   0 . 0   0   0   0   0   0   0   0
# CMP8ki-SAME:   0   0   0   1   1   0   0   0 . 0   0   0   0   0   0   0   0
#               -------------------------------+-------+-----------+-----------
# CMP8ki-SAME:   0   0   0   0   1   1   0   0 . 0   0   1   1   1   0   1   1
# CMP8ki-SAME:   0   0   0   0   0   0   0   0 . 1   1   1   1   1   1   1   1
# CMP8ki-SAME:   0   0   0   0   1   0   0   0 . 0   0   0   0   0   0   0   0
#               -------------------------------+-------+-----------+-----------
# CMP32ki-SAME:  0   0   0   0   1   1   0   0 . 1   0   1   1   1   0   1   1
# CMP32ki-SAME:  1   1   1   1   1   1   1   1 . 1   1   1   1   1   1   1   1
# CMP32ki-SAME:  1   1   1   1   1   1   1   1 . 1   1   1   1   1   1   1   1
# CMP32ki-SAME:  0   1   1   1   1   0   0   0 . 0   0   0   0   0   0   0   0
#               -------------------------------+-------+-----------+-----------
# CMP32ki-SAME:  0   0   0   0   1   1   0   0 . 1   0   1   1   1   0   1   1
# CMP32ki-SAME:  0   0   0   0   0   0   0   0 . 0   0   0   0   0   0   0   0
# CMP32ki-SAME:  0   0   0   0   0   0   0   0 . 0   0   1   0   1   0   1   0
# CMP32ki-SAME:  0   0   0   1   1   0   0   0 . 0   0   0   0   0   0   0   0
#               ---+-----------+---+-------+---+-------------------------------
#        BRIEF  DA |    REG    | L | SCALE | 0 |          DISPLACEMENT
#               ---+-----------+---+-------+---+-------------------------------
#
# NOTE Immediates for pc-rel instructions use relocations and addendum is encoded
# inside the relocation record thus there are 0s instead of the value.
name: MxCMP_MI_PCI
body: |
  bb.0:
    CMP8ki   0, -1, %d1, implicit-def %ccr
    CMP8ki  -1,  0, %d0, implicit-def %ccr
    CMP32ki -1,  0, %d7, implicit-def %ccr
    CMP32ki 42, -1, %d1, implicit-def %ccr

...
--- # PCD
#               -------------------------------+-------+-----------+-----------
#                F   E   D   C   B   A   9   8 | 7   6 | 5   4   3 | 2   1   0
#               -------------------------------+-------+-----------+-----------
#       OPWORD   0   0   0   0   1   1   0   0 |  SIZE |    MODE   |    REG
#               -------------------------------+-------+-----------+-----------
# CMP8qi-SAME:   0   0   0   0   1   1   0   0 . 0   0   1   1   1   0   1   0
# CMP8qi-SAME:   0   0   0   0   0   0   0   0 . 0   0   0   0   0   0   0   0
# CMP8qi-SAME:   0   0   0   0   0   0   0   0 . 0   0   0   0   0   0   0   0
#               -------------------------------+-------+-----------+-----------
# CMP8qi-SAME:   0   0   0   0   1   1   0   0 . 0   0   1   1   1   0   1   0
# CMP8qi-SAME:   0   0   0   0   0   0   0   0 . 1   1   1   1   1   1   1   1
# CMP8qi-SAME:   0   0   0   0   0   0   0   0 . 0   0   0   0   0   0   0   0
#               -------------------------------+-------+-----------+-----------
# CMP32qi-SAME:  0   0   0   0   1   1   0   0 . 1   0   1   1   1   0   1   0
# CMP32qi-SAME:  1   1   1   1   1   1   1   1 . 1   1   1   1   1   1   1   1
# CMP32qi-SAME:  1   1   1   1   1   1   1   1 . 1   1   1   1   1   1   1   1
# CMP32qi-SAME:  0   0   0   0   0   0   0   0 . 0   0   0   0   0   0   0   0
#               -------------------------------+-------+-----------+-----------
# CMP32qi-SAME:  0   0   0   0   1   1   0   0 . 1   0   1   1   1   0   1   0
# CMP32qi-SAME:  0   0   0   0   0   0   0   0 . 0   0   0   0   0   0   0   0
# CMP32qi-SAME:  0   0   0   0   0   0   0   0 . 0   0   1   0   1   0   1   0
# CMP32qi-SAME:  0   0   0   0   0   0   0   0 . 0   0   0   0   0   0   0   0
#
# NOTE Immediates for pc-rel instructions use relocations and addendum is encoded
# inside the relocation record thus there are 0s instead of the value.
name: MxCMP_MI_PCD
body: |
  bb.0:
    CMP8qi   0,  0, implicit-def %ccr
    CMP8qi  -1, -1, implicit-def %ccr
    CMP32qi -1,  0, implicit-def %ccr
    CMP32qi 42,  0, implicit-def %ccr

...
--- # ARII
#               -------------------------------+-------+-----------+-----------
#                F   E   D   C   B   A   9   8 | 7   6 | 5   4   3 | 2   1   0
#               -------------------------------+-------+-----------+-----------
#       OPWORD   0   0   0   0   1   1   0   0 |  SIZE |    MODE   |    REG
#               -------------------------------+-------+-----------+-----------
# CMP8fi-SAME:   0   0   0   0   1   1   0   0 . 0   0   1   1   0   0   0   1
# CMP8fi-SAME:   0   0   0   0   0   0   0   0 . 0   0   0   0   0   0   0   0
# CMP8fi-SAME:   1   0   0   0   1   0   0   0 . 1   1   1   1   1   1   1   1
#               -------------------------------+-------+-----------+-----------
# CMP8fi-SAME:   0   0   0   0   1   1   0   0 . 0   0   1   1   0   0   0   0
# CMP8fi-SAME:   0   0   0   0   0   0   0   0 . 1   1   1   1   1   1   1   1
# CMP8fi-SAME:   1   0   0   0   1   0   0   0 . 0   0   0   0   0   0   0   0
#               -------------------------------+-------+-----------+-----------
# CMP32fi-SAME:  0   0   0   0   1   1   0   0 . 1   0   1   1   0   1   1   0
# CMP32fi-SAME:  1   1   1   1   1   1   1   1 . 1   1   1   1   1   1   1   1
# CMP32fi-SAME:  1   1   1   1   1   1   1   1 . 1   1   1   1   1   1   1   1
# CMP32fi-SAME:  1   0   0   0   1   0   0   0 . 0   0   0   0   0   0   0   0
#               -------------------------------+-------+-----------+-----------
# CMP32fi-SAME:  0   0   0   0   1   1   0   0 . 1   0   1   1   0   0   0   1
# CMP32fi-SAME:  0   0   0   0   0   0   0   0 . 0   0   0   0   0   0   0   0
# CMP32fi-SAME:  0   0   0   0   0   0   0   0 . 0   0   1   0   1   0   1   0
# CMP32fi-SAME:  1   0   0   0   1   0   0   0 . 1   1   1   1   1   1   1   1
#               ---+-----------+---+-------+---+-------------------------------
#        BRIEF  DA |    REG    | L | SCALE | 0 |          DISPLACEMENT
#               ---+-----------+---+-------+---+-------------------------------
name: MxCMP_MI_ARII
body: |
  bb.0:
    CMP8fi   0, -1, %a1, %a0, implicit-def %ccr
    CMP8fi  -1,  0, %a0, %a0, implicit-def %ccr
    CMP32fi -1,  0, %a6, %a0, implicit-def %ccr
    CMP32fi 42, -1, %a1, %a0, implicit-def %ccr

...
--- # ARID
#               -------------------------------+-------+-----------+-----------
#                F   E   D   C   B   A   9   8 | 7   6 | 5   4   3 | 2   1   0
#               -------------------------------+-------+-----------+-----------
#       OPWORD   0   0   0   0   1   1   0   0 |  SIZE |    MODE   |    REG
#               -------------------------------+-------+-----------+-----------
# CMP8pi-SAME:   0   0   0   0   1   1   0   0 . 0   0   1   0   1   0   0   1
# CMP8pi-SAME:   0   0   0   0   0   0   0   0 . 0   0   0   0   0   0   0   0
# CMP8pi-SAME:   1   1   1   1   1   1   1   1 . 1   1   1   1   1   1   1   1
#               -------------------------------+-------+-----------+-----------
# CMP8pi-SAME:   0   0   0   0   1   1   0   0 . 0   0   1   0   1   0   0   0
# CMP8pi-SAME:   0   0   0   0   0   0   0   0 . 1   1   1   1   1   1   1   1
# CMP8pi-SAME:   0   0   0   0   0   0   0   0 . 0   0   0   0   0   0   0   0
#               -------------------------------+-------+-----------+-----------
# CMP32pi-SAME:  0   0   0   0   1   1   0   0 . 1   0   1   0   1   1   1   0
# CMP32pi-SAME:  1   1   1   1   1   1   1   1 . 1   1   1   1   1   1   1   1
# CMP32pi-SAME:  1   1   1   1   1   1   1   1 . 1   1   1   1   1   1   1   1
# CMP32pi-SAME:  0   0   0   0   0   0   0   0 . 0   0   0   0   0   0   0   0
#               -------------------------------+-------+-----------+-----------
# CMP32pi-SAME:  0   0   0   0   1   1   0   0 . 1   0   1   0   1   0   0   1
# CMP32pi-SAME:  0   0   0   0   0   0   0   0 . 0   0   0   0   0   0   0   0
# CMP32pi-SAME:  0   0   0   0   0   0   0   0 . 0   0   1   0   1   0   1   0
# CMP32pi-SAME:  1   1   1   1   1   1   1   1 . 1   1   1   1   1   1   1   1
name: MxCMP_MI_ARID
body: |
  bb.0:
    CMP8pi   0, -1, %a1, implicit-def %ccr
    CMP8pi  -1,  0, %a0, implicit-def %ccr
    CMP32pi -1,  0, %a6, implicit-def %ccr
    CMP32pi 42, -1, %a1, implicit-def %ccr

...
--- # ARI
#               -------------------------------+-------+-----------+-----------
#                F   E   D   C   B   A   9   8 | 7   6 | 5   4   3 | 2   1   0
#               -------------------------------+-------+-----------+-----------
#       OPWORD   0   0   0   0   1   1   0   0 |  SIZE |    MODE   |    REG
#               -------------------------------+-------+-----------+-----------
# CMP8ji-SAME:   0   0   0   0   1   1   0   0 . 0   0   0   1   0   0   0   1
# CMP8ji-SAME:   0   0   0   0   0   0   0   0 . 0   0   0   0   0   0   0   0
#               -------------------------------+-------+-----------+-----------
# CMP8ji-SAME:   0   0   0   0   1   1   0   0 . 0   0   0   1   0   0   0   0
# CMP8ji-SAME:   0   0   0   0   0   0   0   0 . 1   1   1   1   1   1   1   1
#               -------------------------------+-------+-----------+-----------
# CMP32ji-SAME:  0   0   0   0   1   1   0   0 . 1   0   0   1   0   1   1   0
# CMP32ji-SAME:  1   1   1   1   1   1   1   1 . 1   1   1   1   1   1   1   1
#               -------------------------------+-------+-----------+-----------
# CMP32ji-SAME:  0   0   0   0   1   1   0   0 . 1   0   0   1   0   0   0   1
# CMP32ji-SAME:  0   0   0   0   0   0   0   0 . 0   0   1   0   1   0   1   0
name: MxCMP_MI_ARI
body: |
  bb.0:
    CMP8ji   0, %a1, implicit-def %ccr
    CMP8ji  -1, %a0, implicit-def %ccr
    CMP32ji -1, %a6, implicit-def %ccr
    CMP32ji 42, %a1, implicit-def %ccr

...
